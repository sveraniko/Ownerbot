# OWNERBOT_NOTIFICATIONS.md

## –ß—Ç–æ —ç—Ç–æ
OwnerBot notifications ‚Äî owner-only –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Ç–æ–ª—å–∫–æ `OWNER_IDS`):
- FX delta —Å–∏–≥–Ω–∞–ª (–ø–æ –ø–æ—Ä–æ–≥—É % –∏ –∫—É–ª–¥–∞—É–Ω—É –≤ —á–∞—Å–∞—Ö).
- Daily digest (–æ–¥–∏–Ω —Ä–∞–∑ –≤ –¥–µ–Ω—å, –≤ –∑–∞–¥–∞–Ω–Ω–æ–π timezone/time).

## Anti-spam
- FX —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ `>= threshold` –∏ –ø—Ä–æ—à—ë–ª cooldown.
- Digest –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–µ —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –¥–µ–Ω—å (–ª–æ–∫–∞–ª—å–Ω–æ –≤ `digest_tz`).
- –û—à–∏–±–∫–∏ –∞–ø—Å—Ç—Ä–∏–º–∞/–¥–æ—Å—Ç–∞–≤–∫–∏ –∏–º–µ—é—Ç cooldown, —á—Ç–æ–±—ã –Ω–µ —Ñ–ª–∞–¥–∏—Ç—å –∫–∞–∂–¥—É—é tick-–∏—Ç–µ—Ä–∞—Ü–∏—é.

## Worker
- –§–æ–Ω–æ–≤—ã–π worker: `NotifyWorker`.
- –ü–µ—Ä–∏–æ–¥: –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç.
- Multi-instance safety: Redis distributed lock `ownerbot:notify:lock` (NX + EX).
- –í DEMO —Ä–µ–∂–∏–º–µ (`UPSTREAM_MODE=DEMO`) —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ demo FX payload.

## –ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å
1. –û—Ç–∫—Ä–æ–π `/templates` ‚Üí `üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è`.
2. –ù–∞–∂–º–∏ `NTF —Å—Ç–∞—Ç—É—Å` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.
3. –í–∫–ª—é—á–∏ `FX delta ON` –∏/–∏–ª–∏ `Digest ON`.

## ENV
- `NOTIFY_WORKER_ENABLED=1` ‚Äî –≤–∫–ª—é—á–∞–µ—Ç worker –Ω–∞ startup (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á—ë–Ω).
